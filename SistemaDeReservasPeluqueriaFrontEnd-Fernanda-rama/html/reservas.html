<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard - Peluquería</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>

  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@6.1.15/index.global.min.css" rel="stylesheet"/>

  <!-- CSS personalizado -->
  <link rel="stylesheet" href="../css/estilo.css"/>

  <style>
    .fc { max-width: 900px; margin: 0 auto; }
    #horarios { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; }
    .horario-btn { min-width: 90px; }
    .banner { background: #343a40; color: #fff; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; border-radius:0.5rem; }
    .banner button { margin-left: 10px; }
    .modal-table { width: 100%; }
    .modal-table th, .modal-table td { padding: 8px; text-align: center; }
  </style>
</head>
<body class="bg-light">

  <!-- Banner superior -->
  <div class="banner">
    <div>Bienvenido, <span id="nombreUsuario">Usuario</span></div>
    <div>
      <button class="btn btn-outline-light btn-sm" data-bs-toggle="modal" data-bs-target="#historialModal">Historial</button>
      <button class="btn btn-danger btn-sm" id="btn-cerrar-sesion">Cerrar sesión</button>
    </div>
  </div>

  <div class="container py-2">

    <!-- Selección de servicio y trabajador -->
    <div class="card shadow p-3 mb-4">
      <div class="row g-3 align-items-end">
        <div class="col-md-5">
          <label class="form-label">Servicio</label>
          <select id="select-servicio" class="form-select">
            <option value="" selected disabled>Elige un servicio</option>
          </select>
        </div>
        <div class="col-md-5">
          <label class="form-label">Trabajador</label>
          <select id="select-trabajador" class="form-select" disabled>
            <option value="" selected disabled>Primero elige un servicio</option>
          </select>
        </div>
        <div class="col-md-2 text-end">
          <button id="btn-refrescar" class="btn btn-outline-secondary w-100">Refrescar</button>
        </div>
      </div>
    </div>

    <!-- Calendario -->
    <div class="card shadow p-3 mb-4">
      <h5 class="mb-3">Calendario</h5>
      <div id="calendar"></div>
    </div>

    <!-- Horarios disponibles -->
    <div class="card shadow p-3">
      <h5 class="mb-3">Horarios disponibles para <span id="fecha-seleccionada">—</span></h5>
      <div id="horarios"></div>
      <div class="text-center mt-3">
        <button id="btn-confirmar" class="btn btn-primary" disabled>Confirmar reserva</button>
      </div>
    </div>
  </div>

  <!-- Modal historial -->
  <div class="modal fade" id="historialModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Historial de reservas</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <table class="table table-striped modal-table">
            <thead>
              <tr>
                <th>Servicio</th>
                <th>Trabajador</th>
                <th>Fecha</th>
                <th>Hora inicio</th>
                <th>Hora fin</th>
                <th>Acción</th>
              </tr>
            </thead>
            <tbody id="historial-body">
              <!-- Aquí se llenan las reservas -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.15/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@6.1.15/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/interaction@6.1.15/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.15/locales-all.global.min.js"></script>
  <script src="../js/reservas.js"></script>
</body>
</html>
